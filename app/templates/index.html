<!DOCTYPE html>
<html>
  <head>
    <title>IoTree Control</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
                           integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
                           crossorigin="anonymous" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css"
                           integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP"
                           crossorigin="anonymous" />
    <link rel="stylesheet" href="{{ path_prefix }}css/christmastree.css" type="text/css" />
  </head>
  <body>
    <div class="container" style="margin-top: 1em">
      <div class="row justify-content-center">
        <div class="col-10">
          <div class="card">
            <img src="{{ path_prefix }}{{ url_for('video_feed') }}" class="card-img-top" style="height: 320px;" />
            <div class="card-body">
              <div class="row justify-content-between">
                <div class="col-6" style="text-align: left;">
                  <div class="btn-group">
                    <div class="dropdown">
                      <button type="button" class="btn btn-light">Load Preset</button>
                    </div>
                  </div>
                  <div class="btn-group">
                    <div class="dropdown">
                      <button type="button" class="btn btn-secondary">Load</button>
                    </div>
                  </div>
                </div>
                <div class="col-6" style="text-align: right;">
                  <button type="button" class="btn btn-secondary">Save</button>
                  <button type="button" class="btn btn-primary">Send to tree! <i class="fa
                  fa-cloud-upload-alt"></i></button>
                </div>
              </div>
              <div class="ct-keyframes">
                <table class="table ct-table">
                  <thead>
                    <tr>
                      <th class="min">LED</th>
                      <th>1</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <th class="min"></th>
                      <td>
                        <button type="button" class="btn btn-light led-button"><i class="fa fa-lightbulb"></i></button>
                        <br />
                        <button type="button" class="btn btn-light">Sine</button>
                        <hr />
                      </td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <hr />
      <div class="row">
        <div class="col-4">
          <h2>What is this?</h2>
          <p>
            This christmas I am giving the masses control of my christmas tree lights. This page is the endpoint from
            which the lights can be controlled. It contains a real-time image of what the tree is looking like right now
            along with some controls for changing the LED arrangement and colors.
          </p>
          <p>
            Any interaction you have with the page here is forwarded down to the christmas tree and you can watch as
            your commands battle those of other users online right now.
          </p>
        </div>
        <div class="col-4">
          <h2>How is it made?</h2>
          <p>
            A <a href="https://www.raspberrypi.org/">Raspberry Pi</a> sitting on my desk is connected to a webcam and a
            custom dongle I built that controls a string of 50
            <a href="https://cdn-shop.adafruit.com/datasheets/WS2811.pdf">WS2811</a>
            individually-addressable LEDs.  That Raspberry Pi then connects to a <a href="https://redis.io/">Redis</a>
            instance hosted on a cloud server. A <a href="http://flask.pocoo.org/docs/1.0/">Flask</a>-based python
            application on the cloud server connects to the same redis instance and uses the PUBSUB functionality to
            receive the realtime webcam image published by the Raspberry Pi and also issue commands back to the
            Raspberry Pi.
            <a href="https://socket.io/">Socketio</a> is used to communicate between this (mostly static) page and the
            python app running on the server.
          </p>
        </div>
        <div class="col-4">
          <h2>Where can I find the source?</h2>
          <p>
            As with all my hobby projects, this is entirely open source. Please see the following github links:
          </p>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js" integrity="sha256-ji09tECORKvr8xB9iCl8DJ8iNMLriDchC1+p+yt1hSs=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.17/vue.min.js" integrity="sha256-FtWfRI+thWlNz2sB3SJbwKx5PgMyKIVgwHCTwa3biXc=" crossorigin="anonymous"></script>
    <script src="{{ path_prefix }}js/christmastree.js"></script>
  </body>
</html>

